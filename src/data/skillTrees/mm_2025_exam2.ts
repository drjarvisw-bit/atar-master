import { Topic, Subject, Difficulty, type SkillTreeNode, type SkillTreeData } from '../../types';

const nodes: SkillTreeNode[] = [
  // ===================== TIER 0: Foundation Skills =====================
  {
    id: 'mm25e2-basic-derivatives',
    title: 'Basic Derivatives',
    description: 'Power rule, trig derivatives, exponential derivatives',
    prerequisites: [],
    topic: Topic.CALCULUS,
    difficulty: Difficulty.STAR_1,
    tier: 0,
    position: { x: 1, y: 0 },
    questions: [
      {
        id: 'mm25e2-bd-1',
        text: 'Find the derivative of $f(x) = 4x^3 - 3x^4$.',
        hints: ['Apply the power rule to each term'],
        answer: "$f'(x) = 12x^2 - 12x^3$",
        markingGuide: ['Correct power rule on both terms'],
        marks: 1,
      },
      {
        id: 'mm25e2-bd-2',
        text: 'Differentiate $y = \\cos(x)$.',
        hints: ['Standard trig derivative'],
        answer: "$\\frac{dy}{dx} = -\\sin(x)$",
        markingGuide: ['Correct trig derivative'],
        marks: 1,
      },
    ],
  },
  {
    id: 'mm25e2-basic-functions',
    title: 'Function Basics',
    description: 'Domain, range, function notation, inverse functions',
    prerequisites: [],
    topic: Topic.FUNCTIONS,
    difficulty: Difficulty.STAR_1,
    tier: 0,
    position: { x: 3, y: 0 },
    questions: [
      {
        id: 'mm25e2-bf-1',
        text: 'Does the set $\\{(1,3), (2,0), (3,1)\\}$ represent a function? Does it have an inverse?',
        hints: ['A function must have unique x-values', 'An inverse exists if the function is one-to-one (unique y-values)'],
        answer: 'Yes, it is a function (unique x-values). Yes, it has an inverse (unique y-values).',
        markingGuide: ['Correct identification of function', 'Correct inverse check'],
        marks: 1,
      },
    ],
  },
  {
    id: 'mm25e2-basic-probability',
    title: 'Probability Fundamentals',
    description: 'Basic probability rules, conditional probability, tree diagrams',
    prerequisites: [],
    topic: Topic.PROBABILITY,
    difficulty: Difficulty.STAR_1,
    tier: 0,
    position: { x: 5, y: 0 },
    questions: [
      {
        id: 'mm25e2-bp-1',
        text: 'If $\\Pr(A) = 0.3$ and $\\Pr(B|A) = 0.5$, find $\\Pr(A \\cap B)$.',
        hints: ['Use the multiplication rule: $\\Pr(A \\cap B) = \\Pr(A) \\times \\Pr(B|A)$'],
        answer: '$\\Pr(A \\cap B) = 0.3 \\times 0.5 = 0.15$',
        markingGuide: ['Correct application of multiplication rule'],
        marks: 1,
      },
    ],
  },
  {
    id: 'mm25e2-basic-integration',
    title: 'Basic Integration',
    description: 'Antiderivatives, power rule for integration, definite integrals',
    prerequisites: [],
    topic: Topic.CALCULUS,
    difficulty: Difficulty.STAR_1,
    tier: 0,
    position: { x: 7, y: 0 },
    questions: [
      {
        id: 'mm25e2-bi-1',
        text: 'Evaluate $\\int_0^2 (4x^3 - 3x^4) \\, dx$.',
        hints: ['Find the antiderivative term by term', 'Evaluate at the bounds'],
        answer: '$[x^4 - \\frac{3}{5}x^5]_0^2 = 16 - \\frac{96}{5} = -\\frac{16}{5}$',
        markingGuide: ['Correct antiderivative', 'Correct evaluation'],
        marks: 2,
      },
    ],
  },
  {
    id: 'mm25e2-trig-basics',
    title: 'Trigonometric Functions',
    description: 'Trig graphs, period, amplitude, asymptotes of tan',
    prerequisites: [],
    topic: Topic.FUNCTIONS,
    difficulty: Difficulty.STAR_1,
    tier: 0,
    position: { x: 9, y: 0 },
    questions: [
      {
        id: 'mm25e2-tb-1',
        text: 'State the range of $f(x) = 9 - 3\\cos(x)$.',
        hints: ['$\\cos(x)$ ranges from $-1$ to $1$', 'Scale and shift accordingly'],
        answer: '$[9-3, 9+3] = [6, 12]$',
        markingGuide: ['Correct range'],
        marks: 1,
      },
    ],
  },
  {
    id: 'mm25e2-exponential-basics',
    title: 'Exponential & Log Basics',
    description: 'Properties of $e^x$ and $\\log_e(x)$, index laws',
    prerequisites: [],
    topic: Topic.FUNCTIONS,
    difficulty: Difficulty.STAR_1,
    tier: 0,
    position: { x: 11, y: 0 },
    questions: [
      {
        id: 'mm25e2-eb-1',
        text: 'Solve $Ae^{2k} = 8$ and $Ae^{-12k} = 1$ simultaneously for $k$.',
        hints: ['Divide one equation by the other to eliminate $A$'],
        answer: '$e^{14k} = 8 \\implies k = \\frac{\\ln 8}{14} = \\frac{3\\ln 2}{14}$',
        markingGuide: ['Correct elimination', 'Correct solution for k'],
        marks: 2,
      },
    ],
  },
  {
    id: 'mm25e2-normal-basics',
    title: 'Normal Distribution Basics',
    description: 'Standard normal, z-scores, probability calculations',
    prerequisites: [],
    topic: Topic.PROBABILITY,
    difficulty: Difficulty.STAR_1,
    tier: 0,
    position: { x: 13, y: 0 },
    questions: [
      {
        id: 'mm25e2-nb-1',
        text: 'For $X \\sim N(100, 25)$, find $\\Pr(X > 110)$ in terms of a z-score.',
        hints: ['$z = \\frac{x - \\mu}{\\sigma}$, where $\\sigma = \\sqrt{25} = 5$'],
        answer: '$z = \\frac{110-100}{5} = 2$. $\\Pr(X > 110) = \\Pr(Z > 2)$.',
        markingGuide: ['Correct z-score calculation'],
        marks: 1,
      },
    ],
  },

  // ===================== TIER 1: Intermediate Skills =====================
  {
    id: 'mm25e2-stationary-points',
    title: 'Stationary Points',
    description: "Finding and classifying stationary points using $f'(x) = 0$",
    prerequisites: ['mm25e2-basic-derivatives'],
    topic: Topic.CALCULUS,
    difficulty: Difficulty.STAR_2,
    tier: 1,
    position: { x: 0, y: 1 },
    questions: [
      {
        id: 'mm25e2-sp-1',
        text: "Find the stationary points of $g(x) = 4x^3 - 3x^4$.",
        hints: ["Set $g'(x) = 12x^2(1-x) = 0$"],
        answer: '$x = 0$ (stationary inflection) and $x = 1$ (local max). Points: $(0, 0)$ and $(1, 1)$.',
        markingGuide: ['Correct derivative', 'Both stationary points found', 'Correct classification'],
        marks: 2,
      },
    ],
  },
  {
    id: 'mm25e2-transformations',
    title: 'Function Transformations',
    description: 'Reflections, dilations, translations: $af(b(x-h))+k$',
    prerequisites: ['mm25e2-basic-functions', 'mm25e2-trig-basics'],
    topic: Topic.FUNCTIONS,
    difficulty: Difficulty.STAR_2,
    tier: 1,
    position: { x: 2, y: 1 },
    questions: [
      {
        id: 'mm25e2-tr-1',
        text: 'If $y = g(x)$ passes through $(1, 3)$, find the point on $y = 1 - g(2x - 3)$.',
        hints: ['Set $2x - 3 = 1$ to find the new x', 'Then $y_{new} = 1 - g(1) = 1 - 3$'],
        answer: 'Point $(2, -2)$',
        markingGuide: ['Correct x-mapping', 'Correct y-mapping'],
        marks: 2,
      },
    ],
  },
  {
    id: 'mm25e2-bayes-theorem',
    title: "Bayes' Theorem",
    description: 'Conditional probability with reversed conditions, tree diagrams',
    prerequisites: ['mm25e2-basic-probability'],
    topic: Topic.PROBABILITY,
    difficulty: Difficulty.STAR_2,
    tier: 1,
    position: { x: 4, y: 1 },
    questions: [
      {
        id: 'mm25e2-bt-1',
        text: '$m$ students walk (20% late), $n$ students take other transport (40% late). Given a student is late, find $\\Pr(\\text{walked})$.',
        hints: ["Use Bayes' theorem: $\\Pr(W|L) = \\frac{\\Pr(L|W)\\Pr(W)}{\\Pr(L)}$"],
        answer: '$\\frac{0.2m}{0.2m + 0.4n} = \\frac{m}{m + 2n}$',
        markingGuide: ['Correct tree diagram or formula', 'Correct simplification'],
        marks: 2,
      },
    ],
  },
  {
    id: 'mm25e2-definite-integrals',
    title: 'Definite Integrals & Properties',
    description: 'Properties of definite integrals, area interpretation',
    prerequisites: ['mm25e2-basic-integration'],
    topic: Topic.CALCULUS,
    difficulty: Difficulty.STAR_2,
    tier: 1,
    position: { x: 8, y: 1 },
    questions: [
      {
        id: 'mm25e2-di-1',
        text: 'Given $\\int_1^2 f(x)\\,dx = \\int_1^3 f(x)\\,dx$, what can you conclude about $\\int_2^3 f(x)\\,dx$?',
        hints: ['Use the property $\\int_1^3 = \\int_1^2 + \\int_2^3$'],
        answer: '$\\int_2^3 f(x)\\,dx = 0$. The net area from 2 to 3 is zero.',
        markingGuide: ['Correct deduction'],
        marks: 1,
      },
    ],
  },
  {
    id: 'mm25e2-composite-functions',
    title: 'Composite Functions',
    description: 'Finding and analysing $f(g(x))$, domain restrictions',
    prerequisites: ['mm25e2-basic-functions', 'mm25e2-trig-basics'],
    topic: Topic.FUNCTIONS,
    difficulty: Difficulty.STAR_2,
    tier: 1,
    position: { x: 6, y: 1 },
    questions: [
      {
        id: 'mm25e2-cf-1',
        text: 'Let $f(x) = 2x^2 + x - 1$ and $g(x) = \\sin(x)$. Solve $(f \\circ g)(x) > 0$.',
        hints: ['$(f \\circ g)(x) = 2\\sin^2(x) + \\sin(x) - 1$', 'Factor as $(2\\sin x - 1)(\\sin x + 1)$'],
        answer: '$\\sin(x) > \\frac{1}{2}$ (since $\\sin(x) > -1$ always)',
        markingGuide: ['Correct composition', 'Correct factorisation', 'Correct solution'],
        marks: 2,
      },
    ],
  },
  {
    id: 'mm25e2-exponential-models',
    title: 'Exponential Models',
    description: 'Fitting exponential curves, finding $A$ and $k$ from data',
    prerequisites: ['mm25e2-exponential-basics'],
    topic: Topic.FUNCTIONS,
    difficulty: Difficulty.STAR_2,
    tier: 1,
    position: { x: 10, y: 1 },
    questions: [
      {
        id: 'mm25e2-em-1',
        text: 'An exponential function $g(x) = Ae^{kx}$ passes through $(-12, 1)$ and $(2, 8)$. Find $A$ and $k$.',
        hints: ['Set up two equations', 'Divide to eliminate $A$'],
        answer: '$k = \\frac{3\\ln 2}{14}$, $A = 8e^{-2k}$',
        markingGuide: ['Correct system of equations', 'Correct values'],
        marks: 2,
      },
    ],
  },
  {
    id: 'mm25e2-confidence-intervals',
    title: 'Confidence Intervals',
    description: '95% CI for proportions, margin of error, sample size',
    prerequisites: ['mm25e2-basic-probability', 'mm25e2-normal-basics'],
    topic: Topic.PROBABILITY,
    difficulty: Difficulty.STAR_2,
    tier: 1,
    position: { x: 12, y: 1 },
    questions: [
      {
        id: 'mm25e2-ci-1',
        text: 'A 95% CI is $(0.248, 0.552)$. Find the sample proportion $\\hat{p}$ and margin of error $E$.',
        hints: ['$\\hat{p}$ is the midpoint of the interval', '$E$ is half the width'],
        answer: '$\\hat{p} = 0.4$, $E = 0.152$',
        markingGuide: ['Correct sample proportion', 'Correct margin of error'],
        marks: 1,
      },
    ],
  },

  // ===================== TIER 2: Advanced Skills =====================
  {
    id: 'mm25e2-polynomial-analysis',
    title: 'Polynomial Analysis',
    description: 'Complete analysis: stationary points, inflections, sketching quartics',
    prerequisites: ['mm25e2-stationary-points'],
    topic: Topic.CALCULUS,
    difficulty: Difficulty.STAR_3,
    tier: 2,
    position: { x: 1, y: 2 },
    questions: [
      {
        id: 'mm25e2-pa-1',
        text: 'Sketch $g(x) = 4x^3 - 3x^4$, labelling all stationary points and intercepts.',
        hints: ['Find stationary points and classify', 'Find x-intercepts by factoring: $x^3(4 - 3x) = 0$'],
        answer: 'Stationary inflection at $(0,0)$, local max at $(1,1)$. Intercepts: $x = 0, \\frac{4}{3}$.',
        markingGuide: ['Correct stationary points', 'Correct intercepts', 'Correct shape'],
        marks: 3,
      },
    ],
  },
  {
    id: 'mm25e2-advanced-transformations',
    title: 'Advanced Transformations',
    description: 'Multi-step transformations, sequences, equivalent forms',
    prerequisites: ['mm25e2-transformations', 'mm25e2-composite-functions'],
    topic: Topic.FUNCTIONS,
    difficulty: Difficulty.STAR_3,
    tier: 2,
    position: { x: 3, y: 2 },
    questions: [
      {
        id: 'mm25e2-at-1',
        text: 'If $f(x) = a^x$, describe a sequence of transformations that maps $f$ to $g(x) = a^{2x+2}$.',
        hints: ['Write $g(x) = f(2(x+1))$', 'Identify dilation and translation'],
        answer: 'Dilation by factor $\\frac{1}{2}$ from the y-axis, then translation 1 unit left.',
        markingGuide: ['Correct dilation', 'Correct translation', 'Correct order'],
        marks: 2,
      },
    ],
  },
  {
    id: 'mm25e2-binomial-normal',
    title: 'Binomial & Normal Distributions',
    description: '$\\text{Bi}(n,p)$ probabilities, normal distribution with given probabilities',
    prerequisites: ['mm25e2-bayes-theorem', 'mm25e2-confidence-intervals'],
    topic: Topic.PROBABILITY,
    difficulty: Difficulty.STAR_3,
    tier: 2,
    position: { x: 5, y: 2 },
    questions: [
      {
        id: 'mm25e2-bn-1',
        text: '$X \\sim \\text{Bi}(4, p)$. Show that $\\Pr(X \\ge 3) = 4p^3 - 3p^4$.',
        hints: ['$\\Pr(X \\ge 3) = \\Pr(X=3) + \\Pr(X=4)$', 'Use the binomial formula for each'],
        answer: '$\\binom{4}{3}p^3(1-p) + p^4 = 4p^3(1-p) + p^4 = 4p^3 - 4p^4 + p^4 = 4p^3 - 3p^4$',
        markingGuide: ['Correct binomial probabilities', 'Correct simplification'],
        marks: 2,
      },
    ],
  },
  {
    id: 'mm25e2-numerical-integration',
    title: 'Numerical Integration',
    description: 'Trapezium rule, concavity and over/underestimation',
    prerequisites: ['mm25e2-definite-integrals'],
    topic: Topic.CALCULUS,
    difficulty: Difficulty.STAR_3,
    tier: 2,
    position: { x: 7, y: 2 },
    questions: [
      {
        id: 'mm25e2-ni-1',
        text: 'The trapezium rule overestimates the area when $f$ is concave up ($f\'\'(x) > 0$). For which function is this true on $[0, 1]$: $3 - e^x$, $x^3 + 1$, $3\\sin(x) + 1$, $\\log_e(x+3)$?',
        hints: ['Check the second derivative of each on $[0, 1]$'],
        answer: '$f(x) = x^3 + 1$: $f\'\'(x) = 6x > 0$ for $x > 0$.',
        markingGuide: ['Correct identification of concave up function'],
        marks: 1,
      },
    ],
  },
  {
    id: 'mm25e2-trig-calculus',
    title: 'Trig Calculus',
    description: 'Derivatives and tangent lines for trig functions, Newton\'s method',
    prerequisites: ['mm25e2-stationary-points', 'mm25e2-definite-integrals'],
    topic: Topic.CALCULUS,
    difficulty: Difficulty.STAR_3,
    tier: 2,
    position: { x: 9, y: 2 },
    questions: [
      {
        id: 'mm25e2-tc-1',
        text: 'Find the equation of the tangent to $f(x) = \\sin(x) + 1$ at $x = \\frac{2\\pi}{3}$.',
        hints: ["$f'(x) = \\cos(x)$, evaluate at $x = \\frac{2\\pi}{3}$", 'Use point-gradient form'],
        answer: "$f'(\\frac{2\\pi}{3}) = -\\frac{1}{2}$, $f(\\frac{2\\pi}{3}) = \\frac{\\sqrt{3}}{2} + 1$. Tangent: $y = -\\frac{1}{2}(x - \\frac{2\\pi}{3}) + 1 + \\frac{\\sqrt{3}}{2}$.",
        markingGuide: ['Correct gradient', 'Correct point', 'Correct tangent equation'],
        marks: 2,
      },
    ],
  },
  {
    id: 'mm25e2-exponential-inverse',
    title: 'Exponential & Inverse Functions',
    description: 'Finding inverse of exponential/linear models, intersection analysis',
    prerequisites: ['mm25e2-exponential-models'],
    topic: Topic.FUNCTIONS,
    difficulty: Difficulty.STAR_3,
    tier: 2,
    position: { x: 11, y: 2 },
    questions: [
      {
        id: 'mm25e2-ei-1',
        text: 'Let $f(x) = \\frac{x}{2} + 7$. Find $f^{-1}(x)$ and state where $y = f^{-1}(x)$ intersects $y = g^{-1}(x)$ if $f$ and $g$ meet at $(-12, 1)$ and $(2, 8)$.',
        hints: ['$f^{-1}(x) = 2(x - 7)$', 'Intersection of inverses corresponds to reflection of original intersections across $y = x$'],
        answer: '$f^{-1}(x) = 2(x-7)$. Intersections at $(1, -12)$ and $(8, 2)$.',
        markingGuide: ['Correct inverse', 'Correct intersection points'],
        marks: 2,
      },
    ],
  },
  {
    id: 'mm25e2-continuous-pdf',
    title: 'Continuous PDF Analysis',
    description: 'Piecewise PDFs, finding constants, mean and standard deviation',
    prerequisites: ['mm25e2-bayes-theorem', 'mm25e2-definite-integrals'],
    topic: Topic.PROBABILITY,
    difficulty: Difficulty.STAR_3,
    tier: 2,
    position: { x: 13, y: 2 },
    questions: [
      {
        id: 'mm25e2-cp-1',
        text: 'A PDF is $f(x) = k\\sin(x)$ for $0 \\le x < \\frac{\\pi}{4}$ and $f(x) = k\\cos(x)$ for $\\frac{\\pi}{4} \\le x \\le \\frac{\\pi}{2}$. Find $k$.',
        hints: ['$\\int_0^{\\pi/4} k\\sin(x)\\,dx + \\int_{\\pi/4}^{\\pi/2} k\\cos(x)\\,dx = 1$'],
        answer: '$k(1 - \\frac{1}{\\sqrt{2}}) + k(1 - \\frac{1}{\\sqrt{2}}) = 1 \\implies k = \\frac{1}{2(1 - \\frac{1}{\\sqrt{2}})}$',
        markingGuide: ['Correct integration', 'Correct solution for k'],
        marks: 2,
      },
    ],
  },

  // ===================== TIER 3-4: Exam Question Nodes =====================
  {
    id: 'mm25e2-exam-mca',
    title: 'Section A: MCQ 1–10',
    description: 'Multiple choice: trig ranges, asymptotes, transformations, simultaneous equations, inverse functions, trapezium rule, algorithms',
    prerequisites: ['mm25e2-advanced-transformations', 'mm25e2-numerical-integration'],
    topic: Topic.FUNCTIONS,
    difficulty: Difficulty.STAR_3,
    tier: 3,
    position: { x: 2, y: 3 },
    isExamQuestion: true,
    examRef: { examId: 'mm-2025-exam2', year: 2025, subject: Subject.METHODS, questionNumber: 'MC 1–10', marks: 10 },
    questions: [
      {
        id: 'mm25e2-eq-mc5',
        text: 'A function that has a range of $[6, 12]$ is:\nA. $f(x) = 6 + 3\\cos(9x)$\nB. $f(x) = 6 + 6\\cos(3x)$\nC. $f(x) = 9 - 3\\cos(6x)$\nD. $f(x) = 9 - 3\\cos(3x)$',
        hints: ['For range $[6, 12]$: mean = 9, amplitude = 3', 'Check: $9 - 3\\cos(\\cdot)$ gives $[9-3, 9+3] = [6, 12]$'],
        answer: 'D. $9 - 3\\cos(3x)$ has range $[6, 12]$.',
        markingGuide: ['Correct identification of mean and amplitude'],
        marks: 1,
      },
    ],
  },
  {
    id: 'mm25e2-exam-mcb',
    title: 'Section A: MCQ 11–20',
    description: 'Multiple choice: rates of change, normal distribution, composite graphs, PDF, transformations, derivatives, integrals, distance',
    prerequisites: ['mm25e2-binomial-normal', 'mm25e2-continuous-pdf', 'mm25e2-trig-calculus'],
    topic: Topic.CALCULUS,
    difficulty: Difficulty.STAR_3,
    tier: 3,
    position: { x: 8, y: 3 },
    isExamQuestion: true,
    examRef: { examId: 'mm-2025-exam2', year: 2025, subject: Subject.METHODS, questionNumber: 'MC 11–20', marks: 10 },
    questions: [
      {
        id: 'mm25e2-eq-mc19',
        text: 'Point $A$ is on $y = x + c$ and point $B$ is on $y = \\log_e(x-1)$. The minimum length of $AB$ is $\\sqrt{2}$. Find $c$.',
        hints: ['Find where tangent to curve has slope 1 (parallel to line)', '$\\frac{1}{x-1} = 1 \\implies x = 2$, giving point $(2, 0)$'],
        answer: 'Distance from $(2, 0)$ to $y = x + c$: $\\frac{|2 + c|}{\\sqrt{2}} = \\sqrt{2}$, so $|2+c| = 2$. The answer depends on geometry.',
        markingGuide: ['Find tangent point', 'Apply point-to-line distance formula', 'Solve for c'],
        marks: 1,
      },
    ],
  },
  {
    id: 'mm25e2-exam-q1',
    title: 'Q1: Polynomial & Binomial Analysis',
    description: '$g(x) = 4x^3 - 3x^4$: stationary points, sketch, average value, transformations, and binomial connection.',
    prerequisites: ['mm25e2-polynomial-analysis', 'mm25e2-binomial-normal'],
    topic: Topic.CALCULUS,
    difficulty: Difficulty.STAR_4,
    tier: 3,
    position: { x: 0, y: 3 },
    isExamQuestion: true,
    examRef: { examId: 'mm-2025-exam2', year: 2025, subject: Subject.METHODS, questionNumber: 'Q1', marks: 13 },
    questions: [
      {
        id: 'mm25e2-eq-q1',
        text: "Let $g: R \\to R, g(x) = 4x^3 - 3x^4$.\na. Find the coordinates of both stationary points.\nb. Sketch the graph of $y = g(x)$.\nc. Show the gradient table for stationary inflection.\nd. Find the average value of $g$ between $x=0$ and $x=2$.\ne. Describe transformations mapping $g$ to $h$ with inflection at $(1,0)$ and max at $(-1,1)$.\nf. Show that $\\Pr(X \\ge 3) = g(p)$ for $X \\sim \\text{Bi}(4, p)$.",
        hints: ["$g'(x) = 12x^2(1-x)$", 'Average value = $\\frac{1}{b-a}\\int_a^b g(x)\\,dx$', '$\\Pr(X \\ge 3) = \\binom{4}{3}p^3(1-p) + p^4$'],
        answer: "a. $(0,0)$ inflection, $(1,1)$ max. d. $\\frac{1}{2}[x^4 - \\frac{3}{5}x^5]_0^2$. f. $4p^3 - 3p^4 = g(p)$.",
        markingGuide: ['Stationary points', 'Correct sketch', 'Average value integral', 'Binomial expansion'],
        marks: 13,
      },
    ],
  },
  {
    id: 'mm25e2-exam-q2',
    title: 'Q2: Exponential & Linear Models',
    description: '$f(x) = \\frac{x}{2} + 7$ and $g(x) = Ae^{kx}$ intersecting at $(-12, 1)$ and $(2, 8)$.',
    prerequisites: ['mm25e2-exponential-inverse'],
    topic: Topic.FUNCTIONS,
    difficulty: Difficulty.STAR_4,
    tier: 3,
    position: { x: 11, y: 3 },
    isExamQuestion: true,
    examRef: { examId: 'mm-2025-exam2', year: 2025, subject: Subject.METHODS, questionNumber: 'Q2', marks: 14 },
    questions: [
      {
        id: 'mm25e2-eq-q2',
        text: "Let $f(x) = \\frac{x}{2} + 7$ and $g(x) = Ae^{kx}$. They intersect at $(-12, 1)$ and $(2, 8)$.\na. Find exact values of $A$ and $k$.\nb. Find $b$ such that $g(x) = A \\times 2^{bx}$.\nc. Find the area bounded by the curves for $x \\in [-12, 2]$.\nd. Find the maximum value of $h(x) = f(x) - g(x)$.\ne. Find where $y = g^{-1}(x)$ intersects $y = 2(x-7)$.",
        hints: ['From two points: $1 = Ae^{-12k}$ and $8 = Ae^{2k}$', 'Divide equations to find $k$', 'Inverse intersections relate to reflections across $y = x$'],
        answer: "a. $k = \\frac{3\\ln 2}{14}$, $A = 8e^{-2k}$. e. $(1, -12)$ and $(8, 2)$.",
        markingGuide: ['Simultaneous equations for A, k', 'Base change for b', 'Area integral', 'Max of h via derivative', 'Inverse intersection points'],
        marks: 14,
      },
    ],
  },
  {
    id: 'mm25e2-exam-q3',
    title: 'Q3: Continuous Probability',
    description: 'Polynomial PDF, mean/SD, binomial applications, discrete distribution.',
    prerequisites: ['mm25e2-continuous-pdf', 'mm25e2-binomial-normal'],
    topic: Topic.PROBABILITY,
    difficulty: Difficulty.STAR_4,
    tier: 3,
    position: { x: 13, y: 3 },
    isExamQuestion: true,
    examRef: { examId: 'mm-2025-exam2', year: 2025, subject: Subject.METHODS, questionNumber: 'Q3', marks: 14 },
    questions: [
      {
        id: 'mm25e2-eq-q3',
        text: "PDF: $f(t) = \\frac{1}{1215000}(t-29)(59-t)^3$ for $29 \\le t \\le 59$.\na. Find mean and standard deviation.\nb. Driver is late if $t > k$ with $k = 47$.\n  i. Write the integral for probability of being late.\n  ii. Find probability of being late at least once in 5 days.\n  iii. Find probability the proportion late in 5 days is between 0.4 and 0.6.\n  iv. Find integer $k$ giving 0.2 chance of being late once.\nc. Traffic lights discrete distribution analysis.",
        hints: ['Mean = $\\int t \\cdot f(t)\\,dt$', 'Use binomial for 5-day problems', '$\\Pr(\\text{late at least once}) = 1 - \\Pr(\\text{never late})^5$'],
        answer: 'a. Mean $\\approx 36.5$. b.ii. $1 - (1-p)^5$ where $p = \\int_{47}^{59} f(t)\\,dt$.',
        markingGuide: ['Correct mean integral', 'Correct SD', 'Binomial applications', 'Discrete table'],
        marks: 14,
      },
    ],
  },
  {
    id: 'mm25e2-exam-q4',
    title: 'Q4: Trig Calculus & Newton\'s Method',
    description: '$f(x) = \\sin(x) + 1$: evaluation, solving, tangent, Newton\'s method, tangent properties.',
    prerequisites: ['mm25e2-trig-calculus', 'mm25e2-advanced-transformations'],
    topic: Topic.CALCULUS,
    difficulty: Difficulty.STAR_5,
    tier: 4,
    position: { x: 5, y: 4 },
    isExamQuestion: true,
    examRef: { examId: 'mm-2025-exam2', year: 2025, subject: Subject.METHODS, questionNumber: 'Q4', marks: 19 },
    questions: [
      {
        id: 'mm25e2-eq-q4',
        text: "$f(x) = \\sin(x) + 1$ on $[0, \\frac{5\\pi}{2}]$.\na. Evaluate $f(\\frac{2\\pi}{3})$.\nb. Solve $f(x) = \\frac{3}{2}$.\nc. Transform to $f(x+k)$.\nd. Find tangent equation at $x = \\frac{2\\pi}{3}$.\ne. Apply Newton's method iteration.\nf. Investigate tangent properties (min/max intercepts).",
        hints: ["$f(\\frac{2\\pi}{3}) = \\sin(\\frac{2\\pi}{3}) + 1 = \\frac{\\sqrt{3}}{2} + 1$", "$\\sin(x) = \\frac{1}{2}$ gives $x = \\frac{\\pi}{6}, \\frac{5\\pi}{6}, \\frac{13\\pi}{6}$", "Newton's: $x_{n+1} = x_n - \\frac{f(x_n)}{f'(x_n)}$"],
        answer: "a. $1 + \\frac{\\sqrt{3}}{2}$. b. $x = \\frac{\\pi}{6}, \\frac{5\\pi}{6}, \\frac{13\\pi}{6}$.",
        markingGuide: ['Correct evaluation', 'All solutions', 'Tangent equation', "Newton's method iteration", 'Tangent properties analysis'],
        marks: 19,
      },
    ],
  },
];

export const MM_2025_EXAM2_TREE: SkillTreeData = {
  id: 'mm-2025-exam2',
  title: 'Methods 2025 Exam 2',
  description: 'VCE Mathematical Methods 2025 — Exam 2 (Technology Active)',
  subject: Subject.METHODS,
  year: 2025,
  nodes,
  totalMarks: 80,
};
